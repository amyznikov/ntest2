############################################################
#
# ntest2 Makefile
# Generated by amyznikov May 4, 2015
#   from 'linux-gcc-executable' template
#
############################################################

SHELL = /bin/bash

TARGET = ../bin/ntest2

all: $(TARGET)


cross   =
sysroot =
DESTDIR =
prefix  = /usr/local
bindir  = $(prefix)/bin
incdir  = $(prefix)/include
libdir  = $(prefix)/lib

INCLUDES+= -I.
SOURCES = $(wildcard *.c)
HEADERS = $(wildcard *.h)
MODULES = $(foreach s,$(SOURCES),$(addsuffix .o,$(basename $(s))))


# C preprocessor flags
CPPFLAGS=$(DEFINES) $(INCLUDES)

# C Compiler and flags
CC = $(cross)gcc
CFLAGS= -Wall -Wextra -O3 -g0 -pthread

# Loader Flags And Libraries
LD=$(CC)
LDFLAGS = $(CFLAGS)

STRIP = $(cross)strip --strip-all

LDLIBS += -lrt


#########################################


$(MODULES): $(HEADERS) Makefile
$(TARGET) : $(MODULES) Makefile
	$(LD) $(LDFLAGS)  $(MODULES) $(LDLIBS) -o $@

clean:
	$(RM) $(MODULES)

distclean: clean
	$(RM) $(TARGET)

install: $(TARGET) $(DESTDIR)/$(bindir)
	$(STRIP) --strip-all $(TARGET) && cp $(TARGET) $(DESTDIR)/$(bindir)
	cp ../bin/ntest2-analyze $(DESTDIR)/$(bindir)/
	cp ../bin/ntest2-plot $(DESTDIR)/$(bindir)/
	cp ../bin/run-ntests $(DESTDIR)/$(bindir)/

uninstall:
	$(RM) $(DESTDIR)/$(bindir)/$(TARGET)
	$(RM) $(DESTDIR)/$(bindir)/ntest2-analyze
	$(RM) $(DESTDIR)/$(bindir)/ntest2-plot
	$(RM) $(DESTDIR)/$(bindir)/run-ntests


$(DESTDIR)/$(bindir):
	mkdir -p $@
